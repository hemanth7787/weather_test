<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>weather</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/owfont-regular.css" rel="stylesheet" type="text/css">
    <style>
        #myclock {
            position: absolute;

left: 324px;

top: 39px;

background-color: #fff;

border-radius: 100%;

width: 250px;
        }

        body {
            /*background-image: url("night2.jpg")*/
            background-color: #2190fc
        }

        .logo {
        position: absolute;
        top: 0;
        right: 15px;
        width: 75px;
        }

        globaltext{
            color:blanchedalmond;
        }

 @font-face {
    font-family: roboto;
    src: url(Roboto-Bold.ttf);
}

 @font-face {
    font-family: roboto-regular;
    src: url(Roboto-regular.ttf);
}
.temp{
    position: absolute;
    top: 164px;
    left: 59px;
    font-size: 61px;
    color: white;


}

.weathercondtext{
    width: 200px;

height: 100px;

position: absolute;

left: 34px;

top: 245px;

font-size: 24px;

font-family: roboto;

color: white;

text-align: center;
}

    .footer {

position: absolute;

left: 50px;

bottom: 30px;

font-size: 82px;

z-index: 1000;

font-family: roboto;

color: #fff;
    }
    .footer_background{
    position: absolute;
    /*background-color: rgba(0, 0, 0, 1);*/
    height: 132px;
    width: 624px;
    bottom: 8px;
    left: 8px;
    }

    .weathericon{
        font-size: 168px;

position: absolute;

left: 47px;

top: 21px;

color: white;
    }
    </style>
</head>

<body>
        <a class="temp globaltext" id="temp"></a>
        <div class="weathercondtext globaltext"><a id="weatherCond">Weather condition</a></div>
        
    <div id="background">
        <div id="myclock"></div>
    </div>
    <img class="logo" src="je.png">
    <div><a class="footer globaltext">Good morning</a></div>
    <div class="footer_background"></div>

    <!-- <img id="icon" src="" alt="">
    <a id="weatherCond"></a>
     -->



    <div id="weatherIcon"></div>






    <script src="jquery-3.3.1.slim.min.js"></script>
    <script src="js/jquery.thooClock.js"></script>
    <script>
        // onAlarm: function(){},
        // offAlarm: function(){},
        // onEverySecond: function(){},
        $('#myclock').thooClock({
            size: 250,
            dialColor: '#000000',
            dialBackgroundColor: 'transparent',
            secondHandColor: '#f00',
            minuteHandColor: '#222222',
            hourHandColor: '#222222',
            alarmHandColor: '#FFFFFF',
            alarmHandTipColor: '#026729',
            hourCorrection: '+0',
            // alarmCount:1,
            showNumerals: true

        });
    </script>
<script>
        var cityName = 'Bengaluru';
        var weatherUrl = 'http://api.openweathermap.org/data/2.5/weather?q=' + cityName + '&appid=6a70868b22b621d4d5ea02f346e19807&units=metric';

        function updatePage(temp, temp_min, temp_max, weatherCond, weatherIconId){
            $("#temp").html(Math.round( temp * 10) / 10 + "&#8451");
            $("#weatherIcon").html( '<i class="weathericon owf owf-'+weatherIconId+'"></i>')
            $("#weatherCond").html(weatherCond)
            
        }
        function makeRequest() {
            try {
                // console.log('Make Request');
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        // Typical action to be performed when the document is ready:
                        // console.log(xhttp.responseText);
                        var obj = JSON.parse(xhttp.responseText);
                        localStorage.setItem('temp', obj.main.temp);
                        localStorage.setItem('temp_min', obj.main.temp_min);
                        localStorage.setItem('temp_max', obj.main.temp_max);
                        localStorage.setItem('weatherCond', obj.weather[0].main);
                        localStorage.setItem('weatherIcon', 'http://openweathermap.org/img/w/' + obj.weather[0].icon + '.png');
                        localStorage.setItem('weatherIconId', obj.weather[0].id);
                        // UPDATE PAGE
                        updatePage(obj.main.temp, obj.main.temp_min, obj.main.temp_max, obj.weather[0].main,  obj.weather[0].id);
                        setTimeout(makeRequest, 200000000);
                    }
                };
                xhttp.open("GET", weatherUrl, true);
                xhttp.send();
            } catch (err) {
                console.log('UH OH, We got an error', err);
            }
        }

        makeRequest();
    </script>
</body>

</html>